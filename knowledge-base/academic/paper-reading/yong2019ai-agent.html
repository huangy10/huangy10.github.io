<!DOCTYPE html>












  


  


<html class="theme-next pisces use-motion han-js-rendered no-han-space" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






  <!--  -->
  
  
  <link rel="stylesheet" href="https://cdn.bootcss.com/Han/3.3.0/han.css">



  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">














  
  
  
  

  

  

  

  

  

  







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">



  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=7.1.0">








<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="文章的标题是 AI Agent in Software-defined Network: Agent-based Network Service Prediction and Wireless Resource Scheduling Optimization。作者是华中科技大学的，文章发表在IoT上。 1 概述 主要思路是现有的SDN算法无法解决大规模网络的调度需要，作者转而使用AI技术来讲进行服">
<meta property="og:type" content="website">
<meta property="og:title" content="读论文-AI Agent in SDN">
<meta property="og:url" content="http://www.codewoody.com/knowledge-base/academic/paper-reading/yong2019ai-agent.html">
<meta property="og:site_name" content="治部少辅">
<meta property="og:description" content="文章的标题是 AI Agent in Software-defined Network: Agent-based Network Service Prediction and Wireless Resource Scheduling Optimization。作者是华中科技大学的，文章发表在IoT上。 1 概述 主要思路是现有的SDN算法无法解决大规模网络的调度需要，作者转而使用AI技术来讲进行服">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://imgs.codewoody.com/uploads/big/847267a8beaa2dedab4afc279c5f7b78.png">
<meta property="og:image" content="https://imgs.codewoody.com/uploads/big/9f108ea26c896883eac891c303783cee.png">
<meta property="og:image" content="https://imgs.codewoody.com/uploads/big/684f6b7556d7876bbd810dd6d5b2dbec.png">
<meta property="og:updated_time" content="2020-03-22T17:25:00.508Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="读论文-AI Agent in SDN">
<meta name="twitter:description" content="文章的标题是 AI Agent in Software-defined Network: Agent-based Network Service Prediction and Wireless Resource Scheduling Optimization。作者是华中科技大学的，文章发表在IoT上。 1 概述 主要思路是现有的SDN算法无法解决大规模网络的调度需要，作者转而使用AI技术来讲进行服">
<meta name="twitter:image" content="https://imgs.codewoody.com/uploads/big/847267a8beaa2dedab4afc279c5f7b78.png">



  <link rel="alternate" href="/atom.xml" title="治部少辅" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://www.codewoody.com/knowledge-base/academic/paper-reading/yong2019ai-agent">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>读论文-AI Agent in SDN | 治部少辅</title>
  




  <script async src="//www.googletagmanager.com/gtag/js?id=UA-114736006-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-114736006-1');
    }
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">治部少辅</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">大一大万大吉</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-knowledge menu-item-active">

    
    
    
      
    

    

    <a href="/knowledge-base" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i> <br>knowledge</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-weekly">

    
    
    
      
    

    

    <a href="/categories/Weekly/" rel="section"><i class="menu-item-icon fa fa-fw fa-newspaper-o"></i> <br>weekly</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-updates">

    
    
    
      
    

    

    <a href="/update" rel="section"><i class="menu-item-icon fa fa-fw fa-edit"></i> <br>updates</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-channel">

    
    
    
      
    

    

    <a href="https://t.me/everthingaboutbullshit" rel="noopener" target="_blank"><i class="menu-item-icon fa fa-fw fa-signal"></i> <br>channel</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/huangy10" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    

  


          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
    
    <div class="post-block page">
      <header class="post-header">

<h2 class="post-title" itemprop="name headline">读论文-AI Agent in SDN

</h2>

<div class="post-meta">
  
  


  
  
  <ul class="breadcrumb">
    
      
      
        
          
            
          
          
            <li><a href="/knowledge-base/">KNOWLEDGE-BASE</a></li>
          
        
      
    
      
      
        
          
            
          
          
            <li><a href="/knowledge-base/academic/">ACADEMIC</a></li>
          
        
      
    
      
      
        
          
            
          
          
            <li><a href="/knowledge-base/academic/paper-reading/">PAPER-READING</a></li>
          
        
      
    
      
      
        
          
            
          
          
            <li>YONG2019AI-AGENT</li>
          
        
      
    
  </ul>



  <div>
    
      <span class="post-meta-divider">|</span>
      <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
       Views:  
      <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
      </span>
    
  </div>
</div>

</header>

      
      
      
      <div class="post-body han-init-context">
        
        
          <p>文章的标题是 <a href="https://ieeexplore.ieee.org/document/8888257" target="_blank" rel="noopener">AI Agent in Software-defined Network: Agent-based Network Service Prediction and Wireless Resource Scheduling Optimization</a>。作者是华中科技大学的，文章发表在IoT上。</p>
<h1 data-number="1" id="概述"><span class="header-section-number">1</span> 概述</h1>
<p>主要思路是现有的SDN算法无法解决大规模网络的调度需要，作者转而使用AI技术来讲进行服务预测(service prediction)和资源分配(resource scheduling)。使用该方法可以增加SDN的效率，提升资源的命中概率(Hit ratio)。</p>
<p>这里要解释一下文章中提到的Agent的概念：</p>
<blockquote>
<p>An agent is a computer program that simulates human behavior and relationships with a certain intelligence and can run autonomouly to provide corresponding services.</p>
</blockquote>
<p>Agent的特点是</p>
<blockquote>
<p>An agent can function anonomously and consistently, and they are characterized by residency, reactivity, sociality, initiative, and so on.</p>
</blockquote>
<p>有点类似于赛博物理系统的概念。Agent能够感知环境的变化，并反作用于环境。在通信系统中，这样的Agent模型可以用来解决很多问题。例如，使用了Agent模型，用户的服务请求可以用神经网络算法来进行归类分析。LSTM网络可以被用来探究资源分配问题的相关性。SVM可以被用来提取与预测不同网络服务的特征。</p>
<p>作者研究的切入点是：</p>
<blockquote>
<p>The allocation process of large resource blocks and the collaboration of multiple agents in resouce allocation under this scene are not considered in the existing research;</p>
</blockquote>
<p>这篇文章提出了一种基于AI Agent的系统。这样的AI Agents被部署于SDN的不同层级，以实现网络服务预测，资源分配以及其他功能。不同层面的AI Agent的作用不同。在用户设备层面的AI Agent负责集成用户的历史网络数据，进而分析用户的数据使用行为模式可以被分析和预测<span class="foot-note-span">【 <del>尽管叫用户层面，但是这个Agent实际应该部署在边缘服务器，由边缘服务器来分析用户行为</del>】</span>。在基站层面的AI Agent用来汇总流量和服务类型(Traffic and service Type)，进而实现以最大化QoE (Quality of experience) 为目的的优化目标。位于SDN控制器层面的AI Agent用来收集和分析服务请求数据，进而将被高频请求的包部署到基站服务器上<span class="foot-note-span">【这里有点缓存系统的意思了】</span></p>
<figure>
<img src="https://imgs.codewoody.com/uploads/big/847267a8beaa2dedab4afc279c5f7b78.png" alt=""><figcaption>不同层面的AI Agent的交互方式示意图</figcaption>
</figure>
<h1 data-number="2" id="网络架构"><span class="header-section-number">2</span> 网络架构</h1>
<p>传统的SDN服务基于用户请求来调度。即当用户请求一个服务时，远端的服务提供者将服务发送给边缘服务器，最终为用户提供服务。在这种架构下，端到端的延时会显著增长，服务质量QoE也会降低。另一方面，当用户请求率很低时，边缘服务器处于空闲的状态，没有得到有效利用，也降低了用户体验。基于以上的考虑，作者提出了一种基于Agent的模型。为了执行网络管理，负责资源请求、调度和部署的Agent被部署到用户智能终端，基站以及边缘服务器。如下图所示：</p>
<figure>
<img src="https://imgs.codewoody.com/uploads/big/9f108ea26c896883eac891c303783cee.png" alt=""><figcaption>Agent系统架构</figcaption>
</figure>
<figure>
<img src="https://imgs.codewoody.com/uploads/big/684f6b7556d7876bbd810dd6d5b2dbec.png" alt=""><figcaption>Agent交互逻辑</figcaption>
</figure>
<h2 data-number="2.1" id="用户层资源请求"><span class="header-section-number">2.1</span> 用户层：资源请求</h2>
<p>为了减少服务请求延时并改善QoE，部署在边缘的Agent需要预测对应用和计算资源的请求。在移动网络中，用户的资源请求是出发整个框架的关键因素，同时这些请求信息也是在三个层面实现资源调度和部署的重要指导。</p>
<p>这里作者使用一些机器学习算法来处理请求特征的预测，这些算法包括LSTM，SVM还有KNN。另外作者还提到历史数据不会影响到当前的资源请求。但是历史数据能够更一般性地反映用户的请求特征。因此在Agent使用了Knowledge-based模块，环境数据的变化以及agent做出的行为决策都会更新到知识库。</p>
<blockquote>
<p>原文如下：It should be noted that the historical data would be abandoned and they would not influence the current resource request. However, the historical data often contains the characteristics of user personalization full of great value. Therefore, a knowledge base module is placed in the agent, and the environmental state data and action decisions performed by the agetn under the corresponding timestamp are updated in the knowledge base.</p>
</blockquote>
<h2 data-number="2.2" id="基站层资源调度"><span class="header-section-number">2.2</span> 基站层：资源调度</h2>
<p>基站层是在用户层和边缘服务器层之间的中间层，其主要作用是提供无线网络覆盖。在这里，基站层负责接收用户的资源下载请求，并将的边缘层分配的应用和计算资源传送给终端用户。</p>
<p>这一层的Agent感知的Middle Environment包括</p>
<ol type="1">
<li>要用户的资源请求以及手上已经有的计算资源；</li>
<li>服务提供者可以提供给对应用户的资源数量。</li>
</ol>
<p>Agent分配的资源分为两部分：</p>
<ol type="1">
<li>边缘服务器向用户提供资源时的通信资源；</li>
<li>远端服务器上的服务提供者向边缘部署资源时需要使用的通信资源。</li>
</ol>
<p>Agent需要同时考虑用户端和远程服务提供者双方的需求，在保证用户QoE的同时，也要保证远程服务提供商的利益。这部分决策需要经过多轮的trial-and-error的学习流程，以获得最优的决策。</p>
<h2 data-number="2.3" id="sdn控制器层资源部署"><span class="header-section-number">2.3</span> SDN控制器层：资源部署</h2>
<p>SDN控制器能够获取众多向上层开发的无线网络信息，例如用户的实时位置，基站的负载，来自每个用户的资源请求等。这些信息一半来自附近的，具有低延时，高带宽，及位置感知的特点<span class="foot-note-span">【which are mainly reflected in the proximity, low delay, high bandwidth, and location cognition】</span>。对于SDN控制器来说，对于上下文信息的实时感知可以使得控制器可以使其根据网络的实时变化提供对应的关联服务，改善用户体验并提升网络资源利用效率。</p>
<p>这里考虑的是基于Agent的service caching, offloading and transfer。</p>
<p>控制器端的Agent感知的环境参数主要是服务的数量和使用情况、不同的资源提供者的计算资源、用户的实时位置、用户的资源请求等。</p>
<p>这里的Agent的主要任务是向边缘服务器部署资源，包括网络移动服务的caching, offloading and transfer。</p>
<h1 data-number="3" id="系统模型"><span class="header-section-number">3</span> 系统模型</h1>
<p>这里考虑的系统模型是如上文所说的三层结构，包含<span class="math inline">\(N\)</span>个用户设备，<span class="math inline">\(1\)</span>个基站服务器和<span class="math inline">\(1\)</span>个SDN控制器。用户设备记为<span class="math inline">\(U=\left\{u_{1}, u_{2}, \cdots, u_{n}\right\}\)</span>，SDN控制器可以提供<span class="math inline">\(m\)</span>种不同的服务。用户设备可以向基站请求任意一种服务。当基站服务请收到一个请求，如果资源存储在本地，那么服务请直接响应并返回该资源。反之如果资源没有存储在本地，那么服务器向SDN控制器请求此资源。最终SDN控制器将资源发给基站服务器基站服务器再响应给用户。在<span class="math inline">\(m\)</span>种服务中<span class="foot-note-span">【这里作者服务和资源不分啊】</span>，每种服务的数据大小记为<span class="math inline">\(S=\left\{s_{1}, s_{2}, \cdots, s_{m}\right\}\)</span>。同时，基站服务器上的存储和带宽资源是受限的。其中最大存储容量记为<span class="math inline">\(W\)</span>，最大带宽资源记为<span class="math inline">\(B\)</span>。另外，本文忽略了用户向基站服务器发送任务请求和基站服务器向SDN控制器发送任务请求所需的时间。如果假设系统的运行时间是离散的，且临近时间戳的差值是均匀的，那么时间序列可以表达为={t_{1}, t_{2}, }</p>
<h2 data-number="3.1" id="用户请求延时模型"><span class="header-section-number">3.1</span> 用户请求延时模型</h2>
<p>在时间<span class="math inline">\(t_i(t_i \in T)\)</span>用户向基站发出请求之后，基站分配带宽用于传输后续的数据包。基站服务器会根据不同设备的请求调度和分配网络资源。这一过程中的延时包括调度算法计算过程的延时，以及用户需要在队列里面等待的时间。注意到用户的请求可能没法在发起请求的时间片段上得到响应，基站服务器只会在离散的时间片上进行调度和分配。因此，用户可能在计算过程中经历多轮周期的延时。因此，用户请求的延时被定义为三部分：数据包的传输延时、计算过程的延时、以及传输等待的延时。用户<span class="math inline">\(u_j\)</span>在<span class="math inline">\(t_i\)</span>时刻发起一个请求<span class="math inline">\(\omega_{u_{j}}^{t_{i}}=\left\{\omega_{1}, \omega_{2}, \cdots, \omega_{m}\right\}\)</span>，其中<span class="math inline">\(\omega\)</span>代表用户请求数据包的大小。当其取值为0时代表对应的服务类型没有被请求，服务类型的总数是<span class="math inline">\(Z\)</span>。在经历<span class="math inline">\(\alpha_j\)</span>的时间粒度之后，基站根据用户<span class="math inline">\(u_j\)</span>在<span class="math inline">\(t_i\)</span>时刻发出的请求分配给该用户的带宽资源为<span class="math inline">\(q_{u_j}^{t_i}(0 \leq q_{u_{j}}^{t_i}) \leq B\)</span>。因此每个设备的传输速率为:</p>
<p><span class="math display">\[
r_{u_{j}}^{t_{i}}=q_{u_{j}}^{t_{i}} \log _{2}\left(1+\frac{p_{u_{j}}^{t_{i}}\left|h_{u_{j}}^{t_{i}}\right|^{2}}{q_{u_{j}}^{t_{i}} n_{0}+I_{1}+I_{2}+I_{3}}\right)
\]</span></p>
<blockquote>
<p>香农公式</p>
</blockquote>
<p>其中<span class="math inline">\(\left|h_{u_{j}}^{t_{i}}\right|^{2}\)</span>为信道增益矩阵，<span class="math inline">\(n_0\)</span>为噪声的频谱密度，<span class="math inline">\(I_1\)</span>为小区<span class="foot-note-span">【不是住的小区，是LTE网络的蜂窝】</span>内的干扰，<span class="math inline">\(I_3\)</span>代表其他背景噪声及用户收到的其他噪声。因此传输延时为</p>
<p><span class="math display">\[
\mathcal{T}_{u_{j}}^{t_{i}+\alpha_{j}}=\left\{\begin{array}{ll}
0 &amp; r_{u_{j}}^{t_{i}}=0 \\
\frac{\sum_{k=1}^{m} r_{k}}{r_{u_{j}}^{t_{i}}} &amp; \omega_{u_{j}}^{t_{i}}&gt;0
\end{array}\right.
\]</span></p>
<p>其中<span class="math inline">\(\mathcal{T}_{u_{j}}^{t_{i}+\alpha_{j}}\)</span>表示用户<span class="math inline">\(u_j\)</span>在$(t_i + _j) $时刻的传输延时。当基站分配的贷款为0是，这意味着传输还未开始。当带宽不为0时，传输延时是所有请求的数据包与分配的带宽的比值。AI Agent在分配资源时需要进行计算，这部分计算延时为:</p>
<p><span class="math display">\[
\mathcal{C}_{u_{j}}^{t_{i}+\alpha_{j}}=\sum_{k=1}^{\alpha_{j}} \theta_{k}
\]</span></p>
<p>其中 <span class="math inline">\(\theta_k\)</span>代表AI Agent在从<span class="math inline">\(t_i\)</span>到<span class="math inline">\(t_i + \alpha_j\)</span>的每个时间片中的调度延时。因此用户延时可以记为</p>
<p><span class="math display">\[
\mathcal{R}_{u_{j}}^{t_{i}+\alpha_{j}}=\mathcal{T}_{u_{j}}^{t_{i}+\alpha_{j}}+\mathcal{C}_{u_{j}}^{t_{i}+\alpha_{j}}
\]</span></p>
<p>另外，对于每个用户在发出请求后在等待响应时，都会有一个耐心限制，即用户不会无休止地等待基站的返回信息。这个时间阈值取决于服务的类型和数据包的大小。用户<span class="math inline">\(u_j\)</span>对于<span class="math inline">\(t_i\)</span>时刻发出的请求的耐心限制定义为：</p>
<p><span class="math display">\[
d_{u_{j}}^{t_{i}}=\sum_{k=1}^{m} \lambda_{k} \log _{2}\left(1+\omega_{k}^{t_{i}}\right)
\]</span></p>
<p>其中<span class="math inline">\(\lambda_k\)</span>代表耐心和服务<span class="math inline">\(s_k\)</span>的相关性。此值决定于具体的服务类型。例如用户对视频资源的耐心系数较高，而对于一般网页而言则较低。</p>
<h2 data-number="3.2" id="资源管理模型"><span class="header-section-number">3.2</span> 资源管理模型</h2>
<p>位于访问层的AI代理统一进行资源管理和调度。 一方面，资源包括网络资源，在这里将其视为带宽资源。 另一方面，资源包括服务资源。 带宽资源主要分配给用户设备以响应其服务请求并用于服务数据的传输。 当用户请求的服务资源未存储在基站服务器上时，AI代理需要分配必要的带宽资源，以便从SDN控制器向基站服务器传输服务数据。 在本节中，将描述AI代理在访问层中维护的资源。</p>
<p>首先，为了保证资源的调度和分配，AI代理需要维护一个请求队列，并记录的各个用户在当前时刻<span class="math inline">\(t_i\)</span>时的等待时间。服务请求队列记为<span class="math inline">\(A_{t_{i}}=\left\{a_{1}, a_{2}, \cdots, a_{\iota}\right\}\)</span>，其中一共有 <span class="math inline">\(\iota\)</span>个用户设备在等待。然后在<span class="math inline">\(t_i\)</span>AI代理为带宽资源计算调度方案，这一方案记为<span class="math inline">\(Q^{t_{i}}=\left\{q_{u_{1}}^{t_{i}}, q_{u_{2}}^{t_{i}}, \cdots, q_{u_{\iota}}^{t_{i}}\right\}\)</span>。因此在这一时刻剩余的贷款资源为</p>
<p><span class="math display">\[
\delta_{b}^{t_{i}}=B-\sum_{k=1}^{\iota} q_{k}^{d}
\]</span></p>
<p>存储在基站服务器的服务资源为<span class="math inline">\(\mathcal{S}_{b}^{t_{i}}=\left\{s_{1}^{b}, s_{2}^{b}, \cdots, s_{m}^{b}\right\}\)</span>，其中<span class="math inline">\(\mathcal{S}\in \{0,1\}\)</span>，代表了本地是否存储了这种资源，0表示有，1表示无。因此基站服务器上剩余的存储空间可以表示为</p>
<p><span class="math display">\[
\delta_{s}^{t_{i}}=W-\sum_{k=1}^{m} s_{k}^{b} \cdot s_{k}
\]</span></p>
<p>其中<span class="math inline">\(W\)</span>代表存储空间的总量，<span class="math inline">\(s_{k}^{b}\)</span>表示资源<span class="math inline">\(k\)</span>是否位于基站服务器上，<span class="math inline">\(s_{k}\)</span>代表了资源的大小。由于存储空间有限，当<span class="math inline">\(\delta^{t_i}_s\)</span>低于一定的阈值时，服务器会执行服务资源的卸载，以腾出空间缓存其他的服务资源。这一阈值有卸载机制指定。</p>
<h2 data-number="3.3" id="用户体验模型"><span class="header-section-number">3.3</span> 用户体验模型</h2>
<p>在本文的网络系统中，用户服务体验意味着在他/她发起请求后等待服务响应时会有时间延迟。 时间延迟越小，意味着服务满意度越高，反之，如果时间延迟越大，则服务满意度就越低。基于上面的讨论的，用户<span class="math inline">\(u_j\)</span>是否满意于在<span class="math inline">\(t_i\)</span>时刻发出的请求要经理<span class="math inline">\(\alpha\)</span>个周期之后才收到响应</p>
<p><span class="math display">\[
p_{u_{j}}^{t_{i}}=\left\{\begin{array}{ll}
0 &amp; u_{j} \in U, \mathcal{R}_{u_{j}}^{t_{i}+\alpha_{j}} \leq d_{u_{j}}^{t_{i}} \\
1 &amp; u_{j} \in U, \mathcal{R}_{u_{j}}^{t_{i}+\alpha_{j}}&gt;d_{u_{j}}^{t_{i}}
\end{array}\right.
\]</span></p>
<p>0表示满意，1表示不满意。用户的后悔程度(Regret degree)为</p>
<p><span class="math display">\[
V_{u_{j}}^{t_{i}}=(1-p) \cdot\left(\mathcal{C}_{u_{j}}^{t_{i}+\alpha_{j}} \cdot \lambda_{u_{j}}^{t_{i}}+\epsilon_{E}\right)+p \cdot\left(\mathcal{C}_{u_{j}}^{t_{i}+\alpha_{j}} \cdot \lambda_{u_{j}}^{t_{i}}+\epsilon_{F}\right)
\]</span></p>
<p>其中<span class="math inline">\(\boldsymbol{C}_{\boldsymbol{u}_{j}}^{t_{i}+\alpha_{j}}\)</span>表示用户<span class="math inline">\(u_j\)</span>的实际等待时间（尚未包含传输延时）。<span class="math inline">\(\lambda_{u_{j}}^{t_{i}}\)</span>表示耐心系数（与用户和服务类型相关）。<span class="math inline">\(\epsilon_E\)</span>表示请求被满足后的体验数值，<span class="math inline">\(\epsilon_F\)</span>表示请求被满足前的体验数值。</p>
<h2 data-number="3.4" id="问题表述"><span class="header-section-number">3.4</span> 问题表述</h2>
<p>基于以上分析，目标是提高用户的服务体验质量。 即，AI代理根据用户请求和现有资源执行资源调度和分配，以最小化用户的后悔程度。 用户最终获得的体验意味着他/她所请求的服务是否得到满足，这取决于资源调度和AI代理的分配。 因此，在当前时间片下队列在当前的队列中发送的请求是否被满足，可以被建模为</p>
<p><span class="math display">\[
R_{t_{i}}\left(Q_{d}^{t_{i}}, Q_{c}^{t_{i}}\right)=\frac{\sum_{k=1}^{\iota} V_{u_{k}}^{t_{i}}}{\iota}
\]</span></p>
<p>其中<span class="math inline">\(Q_{d}%{t_i}\)</span>和<span class="math inline">\(Q_{c}^{t_i}\)</span>代分别代表AI代理在时刻<span class="math inline">\(t_i\)</span>分配给用户和SDN控制器的带宽资源。目标是最小化一段时间内发起请求的用户的后悔度。这一优化问题可以建模为：</p>
<p><span class="math display">\[
\begin{array}{c}
\mathcal{P} 1: \min _{\left(Q_{d}^{t_{i}}\right) m i z e} \frac{1}{T} \sum_{i=1}^{T} R_{t_{i}}\left(Q_{d}^{t_{i}}, Q_{c}^{t_{i}}\right) \\
\text { subjectto }: L_{1}: 0 \leq \delta_{b}^{t_{i}} \leq B \\
L_{2}: 0 \leq \delta_{s}^{t_{i}} \leq W
\end{array}
\]</span></p>

        
      </div>
      
      
      
    </div>
    


  
  
  <ul class="breadcrumb">
    
      
      
        
          
            
          
          
            <li><a href="/knowledge-base/">KNOWLEDGE-BASE</a></li>
          
        
      
    
      
      
        
          
            
          
          
            <li><a href="/knowledge-base/academic/">ACADEMIC</a></li>
          
        
      
    
      
      
        
          
            
          
          
            <li><a href="/knowledge-base/academic/paper-reading/">PAPER-READING</a></li>
          
        
      
    
      
      
        
          
            
          
          
            <li>YONG2019AI-AGENT</li>
          
        
      
    
  </ul>


    
    
    
  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://imgs.codewoody.com/uploads/big/0330eb8242d9bfc4873c11450f0ab691.jpg" alt="治部少辅">
            
              <p class="site-author-name" itemprop="name">治部少辅</p>
              <div class="site-description motion-element" itemprop="description">晚来天雨雪，能饮一杯无？</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">119</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">61</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/huangy10" title="GitHub &rarr; https://github.com/huangy10" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.zhihu.com/people/woody-huang" title="知乎 &rarr; https://www.zhihu.com/people/woody-huang" rel="noopener" target="_blank"><i class="fa fa-fw fa-zhihu"></i>知乎</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.jianshu.com/u/927273827560" title="简书 &rarr; https://www.jianshu.com/u/927273827560" rel="noopener" target="_blank"><i class="fa fa-fw fa-jianshu"></i>简书</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#概述"><span class="nav-text">1 概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网络架构"><span class="nav-text">2 网络架构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用户层资源请求"><span class="nav-text">2.1 用户层：资源请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基站层资源调度"><span class="nav-text">2.2 基站层：资源调度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sdn控制器层资源部署"><span class="nav-text">2.3 SDN控制器层：资源部署</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#系统模型"><span class="nav-text">3 系统模型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用户请求延时模型"><span class="nav-text">3.1 用户请求延时模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#资源管理模型"><span class="nav-text">3.2 资源管理模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户体验模型"><span class="nav-text">3.3 用户体验模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题表述"><span class="nav-text">3.4 问题表述</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">治部少辅</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>



  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://codewoody.disqus.com/count.js" async></script>


<script>
  var disqus_config = function() {
    this.page.url = "http://www.codewoody.com/knowledge-base/academic/paper-reading/yong2019ai-agent.html";
    this.page.identifier = "knowledge-base/academic/paper-reading/yong2019ai-agent.html";
    this.page.title = '读论文-AI Agent in SDN';
    };
  function loadComments() {
    var d = document, s = d.createElement('script');
    s.src = 'https://codewoody.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    loadComments();
  
</script>





  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'all'
      },
      
    }
    ,
    "HTML-CSS": {
      
      preferredFont: "STIX", 
      availableFonts: ["STIX","TeX"], 
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.bootcss.com/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
<script>
// 加入重试机制
if ($('body').find('div.pdf').length) {
  let retry = 3
  const reqFile = function (onFail) {
    if (retry === 0) return
    retry --
    console.log("retry: " + retry)
    $.ajax({
      type: 'GET',
      url: '//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js',
      dataType: 'script',
      cache: true,
      success: function() {
        $('body').find('div.pdf').each(function(i, o) {
          PDFObject.embed($(o).attr('target'), $(o), {
            pdfOpenParams: {
              navpanes: 0,
              toolbar: 0,
              statusbar: 0,
              pagemode: 'thumbs',
              view: 'FitH'
            },
            PDFJS_URL: '/lib/pdf/web/viewer.html',
            height: $(o).attr('height') || '500px'
          });
        });
      },
      error: onFail
    });
  }
  reqFile(function() {
    setTimeout(reqFile, 100)
  })
}
</script>


  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  })
</script>


  

  


  <script src="https://cdn.bootcss.com/Han/3.3.0/han.js"></script>
  
  <script>
    void function(){
      // window.hinst = Han(document.querySelector('.post-body')).setRoutine([
      //   'initCond',
      //   'renderElem',
      //   'renderJiya',
      //   'renderHanging',
      //   'renderHWS',
      //   'correctBasicBD',
      //   'substCombLigaWithPUA'
      // ]).render()
      const ele = document.getElementById("refs")
      if (ele) {
        ele.setAttribute("lang", "en_US");
      }
    }()

    </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
